从服务端的角度，产生变化的原因，除了常规的来自客户端的请求，可以是系统消息，也可以是订阅的消息，也可以是定时器的触发。

有这样几种定时机制：

对于短期定时，可以使用定时器来实现，例如js中的setInterval；
对于短期延时，可以使用一次性的定时器来实现，例如js中的setTimeout；
对于较长期的定时，例如每天0点，每月1日0点，可以使用cron来触发，触发后publish消息到redis中的某个channel，程序订阅这个channel，收到消息后处理，这样准确、占用资源少；
对于不需要触发的定时，例如过期的token，可以使用缓存过期机制。
对于较长期的不定间隔的定时，可以用setTimeout的嵌套来实现，逻辑比较复杂；如果是nodejs，可以使用EventEmitter来避免嵌套，在事件处理程序中操作，当要执行下一次定时时，emit该事件。