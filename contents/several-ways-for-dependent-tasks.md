# 有依赖的任务的几种执行方式

这里描述的是，有多个任务，任务之间可以有相互依赖，甚至是循环依赖，这些任务的执行顺序问题

## 预先执行

先执行被依赖的任务，再执行其它任务

适用于任务是静态的，依赖关系也是固定的

## 运行时递归先执行依赖的任务

执行前，先确定依赖哪些任务，如果有，先执行那些依赖任务

适用于任务之间没有循环依赖，也可以在运行时通过纪录执行过的依赖任务，以检测是否有循环依赖

## 先分析依赖，再执行任务

在运行前，对任务的依赖进行分析

先找出任务集合中无依赖性的任务，作为第 1 批任务，剩下的任务作为新的集合，再找出无依赖性的任务，作为第 2 批任务，这样递归分析，直到分析完成，或找不到无依赖性的任务（剩下的任务就是循环依赖的任务）

+ 缺点：实现复杂、可能无法区分某些运行时才能确定的依赖
+ 优点：可以检测循环依赖，任务可以批量并行执行，速度快

## 执行任务重新分析依赖

分析出第 1 批任务后，并行执行，一旦有任务执行结束，立即从待执行的任务中，分析出所有无依赖的任务，执行，这样递归执行和分析，直到所有任务执行完成，或找不到无依赖性的任务（剩下的任务就是循环依赖的任务）

和上一条类似，实现复杂度更高，任务执行粒度更细，整体执行速度更快

也可以额外处理任务执行时，不断动态添加待执行任务的情况
