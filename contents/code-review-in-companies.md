# 在公司内部采用 code review 流程的总结

### 问题

+ 需求紧，很多代码在 deadline 前开发完成，马上要上线，没有时间给 code review
+ reviewer 自己忙，没有时间做 code review，或者临时不在
+ 结果 code review 过程只是在走形式，不仅没有提高代码质量，反而增加了额外的流程、沟通，降低了大家的工作效率
+ 因为效果不好，大家对未来类似的创新行为会更倾向抵制

### 解决方案（技术方面）

+ 引入自动化工具，提交 pull request 后，检查代码风格、自动运行测试，能自动化的尽量自动化，减少 reviewer 的工作量
+ 要求提交的 pull request 中要包含测试，对于不同的项目类型，可以是单元测试并要求通过测试、集成测试并自动 UI 截图等等，这样可以让 reviewer 可以更容易 review 改动的代码的输入输出、界面变化等等
+ 采用非固定 reviewer 的机制，而不是固定 reviewer 的机制，避免 reviewer 人不在时导致的延误，同时让每个开发者都参与 review 过程，甚至把review 指标加入考核指标
+ 更高的要求是，提交 pull request 后，会自动创建对应的临时测试环境，reviewer 可以直接在该测试环境测试 API、 UI 交互等，代码 merge 后，测试环境自动释放

### 解决方案（人的方面）

+ 能够尊重代码质量，可以大幅减少出问题的可能性，也减少了未来需求变更时所花的时间
+ 规划进度时，根据功能复杂度，预留至少半天的 code review 时间
+ 开发者要有测试和 lint 意识
+ 要求高工作效率，除了完成功能之外，还有时间可以 review 代码、写测试
