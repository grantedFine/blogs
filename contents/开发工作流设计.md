不合适的开发工作流，会造成麻烦，推迟开发进度，甚至会 block 所有人的开发任务。

例如，如果使用 git flow 工作流，因为流程复杂，会造成大量的沟通成本。

再例如，如果系统划分的过于细碎，一个简单的业务修改，也会牵涉到 2 个以上的仓库的改动，单独提交改动时，都会 break 测试，当依赖关系复杂时，会更头疼。

对于系统的划分，推荐把业务系统放在一个仓库，包含服务端和各个客户端，提供详细的启动文档；独立可复用的组件，放在各个独立的仓库中，提供详细的使用文档和严格的版本号控制，可以发布到包管理器中，或者以 git 子模块的形式被使用。

这样划分的话，不独立可复用的代码也可以被复用，测试时，系统是作为一个整体被测试的，不用处理复杂的依赖关系。

工作流推荐简洁有效的 Github flow，只有一个主分支 master branch，和其它多个 feature branches，主分支设为 protected，不能直接 push，必须通过 pull/merge request 合并到主分支。

相应的各种环境：

+ 生产环境：面对真实用户，根据发布计划，从 master 分支拉取代码，发布
+ 测试环境：合并 pull/merge request 后，会从 master 分支拉取代码，进行集成测试
+ 开发环境：对应各个 feature branches，创建 pull/merge request 时，指定目录和端口，自动搭建环境，用于在 merge 前查看效果，merge 或 close 后自动删除对应的环境
+ 本地开发环境：开发者本地环境，在开发时可以查看效果

所以，开发流程是：

1. 在本地创建本地开发环境
2. 以 master 分支为基准，创建新的 feature 分支，在这个分支下开发
3. 开发完成后在本地测试
4. 创建 pull/merge request，开发者开始下一项任务
